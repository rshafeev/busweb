<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: MapWidget.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: MapWidget.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * @overview class cityways.MapWidget
 * @copyright 
 * 2012,PremiumGIS Inc. All Rights Reserved. &lt;a href="http://premiumgis.com">PremiumGIS&lt;/a>
 * Project url: &lt;a href="http://ways.in.ua">cityways&lt;/a>
 * 
 * @author &lt;a href="mailto:rs@premiumgis.com">Roman Shafeyev&lt;/a>
 * 
 * @requires cityways/Class.js
 */

/**
 * [MapWidget description]
 * @class cityways.MapWidget
 */
cityways.MapWidget  =  cityways.Class({

	map : null,

	options : null,

	/**
	 * [startMarker description]
	 * @type {cityways.map.Marker}
	 */
	startMarker  : null,

	/**
	 * [finishMarker description]
	 * @type {cityways.map.Marker}
	 */
	finishMarker : null,


	/**
	 * @constructor 
	 * @param  {String} div     ID dom элемента, в который будет помещена карта
	 * @param  {Object} options Начальные опции карты
	 * @example Структура объекта options:
	 * options = {
	 * 			  mapProvider : {String}, 			// Провайдер карты, значения: "google", "yandex"
	 *    		  providerKey : {String},           // Key провайдера(только для yandex карт)
	 *      	  zoom        : {Number},           // Масштаб карты
	 *      	  center : {						// Координаты центральной точки карты 
	 * 			     lat : {Number},	            // Широта
	 * 			     lng : {Number}	                // Долгота
	 * 			  }
	 * };
	 */
	initialize : function(div,options){
		this.options = options;
		this.options.minZoom = options.zoom - 2;
		this.map = new cityways.Map(div,options);
		var self = this;
		cityways.event.addListener(self.getMap(),cityways.map.event.ON_MAP_CLICK,function(e){
			self.onClickMap(e);
		});
	},

	onClickMap : function(e){
		
		if(this.startMarker == null){
			var resourcePath = cityways.options.getResourcePath();
			this.startMarker  = new cityways.map.Marker({
				lat : e.lat,
				lon : e.lon,
				imgFileName : resourcePath + "images/marker_a.png"
			});
			this.map.addMarker(this.startMarker);
			return;
		}
		if(this.finishMarker == null){
			this.finishMarker = new cityways.map.Marker({
				lat : e.lat,
				lon : e.lon,
				imgFileName : resourcePath + "images/marker_b.png"
			});
			this.map.addMarker(this.finishMarker);
			return;
		}
		cityways.logger.info('Click on the map.',e);

	},


	getMap : function(){
		return this.map;
	},


	resizeMap : function(w,h){
		if(this.map != undefined){
			this.map.resize(w,h);
		}
	},

	setHeight : function(h){
		if(this.map != undefined){
			this.map.setHeight(h);
		}

		cityways.logger.info("widget setHeight()",h);
	},

	setWidth : function(w){
		if(this.map != undefined){
			this.map.setWidth(w);
		}		
	}


});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="cityways.Class.html">Class</a></li><li><a href="cityways.EventListener.html">EventListener</a></li><li><a href="cityways.Map_.html">Map</a></li><li><a href="cityways.map.GoogleMap.html">GoogleMap</a></li><li><a href="cityways.map.Marker.html">Marker</a></li><li><a href="cityways.MapWidget.html">MapWidget</a></li><li><a href="cityways.page.MainPage.html">MainPage</a></li><li><a href="global.html#initialize">initialize</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:Вызваается при изменении изображения маркера">Вызваается при изменении изображения маркера</a></li><li><a href="global.html#event:Вызывается при изменении адреса маркера">Вызывается при изменении адреса маркера</a></li><li><a href="global.html#event:Вызывается при изменении местоположения маркера">Вызывается при изменении местоположения маркера</a></li><li><a href="global.html#event:Событие вызывается, когда произошло нажатие клавишей мыши на карте">Событие вызывается, когда произошло нажатие клавишей мыши на карте</a></li></ul><h3>Namespaces</h3><ul><li><a href="cityways.html">cityways</a></li><li><a href="cityways.event.html">event</a></li><li><a href="cityways.helper.styles.html">styles</a></li><li><a href="cityways.helper.time.html">time</a></li><li><a href="cityways.logger.html">logger</a></li><li><a href="cityways.map.html">map</a></li><li><a href="cityways.map.event.html">event</a></li><li><a href="cityways.options.html">options</a></li><li><a href="cityways.page.html">page</a></li><li><a href="cityways.util.html">util</a></li></ul><h3>Global</h3><ul><li><a href="global.html#address">address</a></li><li><a href="global.html#availableRouteTypes">availableRouteTypes</a></li><li><a href="global.html#currentCity">currentCity</a></li><li><a href="global.html#div">div</a></li><li><a href="global.html#enableRouteTypeBtn">enableRouteTypeBtn</a></li><li><a href="global.html#findShortestPaths">findShortestPaths</a></li><li><a href="global.html#finishMarker">finishMarker</a></li><li><a href="global.html#getCurrentCity">getCurrentCity</a></li><li><a href="global.html#getFullCost">getFullCost</a></li><li><a href="global.html#getNativeMapObj">getNativeMapObj</a></li><li><a href="global.html#getWalkingTime">getWalkingTime</a></li><li><a href="global.html#googleMap">googleMap</a></li><li><a href="global.html#imgFileName">imgFileName</a></li><li><a href="global.html#location">location</a></li><li><a href="global.html#mapWidget">mapWidget</a></li><li><a href="global.html#settingsPanel">settingsPanel</a></li><li><a href="global.html#startMarker">startMarker</a></li><li><a href="global.html#visibleRightPanel">visibleRightPanel</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Thu Feb 14 2013 03:24:21 GMT+0200 (EET)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
