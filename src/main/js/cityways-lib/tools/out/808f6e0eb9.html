<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: map/GoogleMap.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: map/GoogleMap.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * @overview class cityways.map.GoogleMap
 * @copyright 
 * 2012,PremiumGIS Inc. All Rights Reserved. &lt;a href="http://premiumgis.com">PremiumGIS&lt;/a>
 * Project url: &lt;a href="http://ways.in.ua">cityways&lt;/a>
 * 
 * @author &lt;a href="mailto:rs@premiumgis.com">Roman Shafeyev&lt;/a>
 * 
 * @requires cityways/Class.js
 */

/**
 * 
 * @class cityways.map.GoogleMap
 * @extends {cityways.Map}
 * @example
 * &lt;html>
 * &lt;head>
 * 		&lt;script>.../cityways.js&lt;/script>
 *		&lt;script>
 * 				function initialize(){
 * 				var map = new cityways.map.GoogleMap('map');
 * 				}
 * 		&lt;/script>
 * &lt;/head>
 * &lt;body onload="initialize()">
 * 		&lt;div id="map">&lt;/div>
 * &lt;/body>
 * &lt;/html>
 */
cityways.map.GoogleMap = cityways.Class({
    
    /**
     * ID dom элемента, в который нужно поместить карту
     * @type {String}
     * @private
     */
    div  : null,
  
    /**
     * Объект google.maps.Map
     * @type {google.maps.Map}
     * @private
     */
    googleMap : null,


 	/**
 	 * @constructor
	 * @param  {String} div     ID dom элемента, в который будет помещена карта
	 * @param  {Object} options Начальные опции карты
	 * @example Структура объекта options:
	 * options = {
	 *      	  zoom        : {Number},             // Масштаб карты
	 *      	  minZoom     : {Number},             // Минимальный масштаб
	 *      	  center : {						  // Координаты центральной точки карты 
	 * 			     lat : {Number},	              // Широта
	 * 			     lng : {Number}	                  // Долгота
	 * 			  }
	 * };
 	 */
	initialize : function(div, options) {
	    this.div = div;

	    var latlng = new google.maps.LatLng(options.center.lat,
				options.center.lng);
	    
	    var googleMapOptions = {
			zoom : options.zoom,
			center : latlng,
			mapTypeId : google.maps.MapTypeId.ROADMAP,
			minZoom : options.minZoom
		};
	    cityways.logger.info(googleMapOptions);
	    var self = this;
	    $(document).ready(function() {
			self.googleMap = new google.maps.Map(document.getElementById(div),googleMapOptions);
			self.googleMap.setOptions({
					draggableCursor : 'crosshair'
				});
			self._registerListeners();
			cityways.logger.info(self.getHeight(),self.getWidth());
			self.resize(self.getWidth(),self.getHeight());

			cityways.event.triggerEvent(self, cityways.map.event.ON_MAP_LOADED, self);
			cityways.logger.info('Google map was initialized');
		});
	    

	},


	_registerListeners : function() {
		var self = this;
		cityways.logger.info(self);
		google.maps.event.addListener(self.googleMap, 'click', function(e) {
			var args = {
				lat : e.latLng.lat(),
				lng : e.latLng.lng()
			};
			cityways.event.triggerEvent(self, cityways.map.event.ON_MAP_CLICK, args);
		});
	},


	resize : function(w,h){
		if(w != undefined)
			$("#" + this.div).css('width', w);
		if(h != undefined)
			$("#" + this.div).css('height', h);
		
		if(this.getNativeMapObj() != undefined){
			cityways.logger.info('resize()');
			google.maps.event.trigger(this.getNativeMapObj(), 'resize');
		}
	},


	getNativeMapObj : function(){
		return this.googleMap;
	},



	setHeight : function(h){
		$("#" + this.div).css('height', h);
		cityways.logger.info('setHeight()',h);
		if(this.getNativeMapObj() != undefined){
			google.maps.event.trigger(this.getNativeMapObj(), 'resize');
		}

	},

	getHeight : function(){
		return $("#" + this.div).css('height');
	},

	setWidth : function(w){
		$("#" + this.div).css('width', w);
		if(this.getNativeMapObj() != undefined){
		google.maps.event.trigger(this.getNativeMapObj(), 'resize');
		}
	},

	getWidth : function(){
		return $("#" + this.div).css('width');
	},

	/**
	 * [addMarker description]
	 * @function
	 * @memberOf cityways.map.GoogleMap
	 * @param {cityways.map.Marker} marker [description]
	 */
	addMarker : function(marker){

	}


});</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="cityways.Class.html">Class</a></li><li><a href="cityways.EventListener.html">EventListener</a></li><li><a href="cityways.Map_.html">Map</a></li><li><a href="cityways.map.GoogleMap.html">GoogleMap</a></li><li><a href="cityways.map.Marker.html">Marker</a></li><li><a href="cityways.MapWidget.html">MapWidget</a></li><li><a href="cityways.page.MainPage.html">MainPage</a></li><li><a href="global.html#initialize">initialize</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:Вызваается при изменении изображения маркера">Вызваается при изменении изображения маркера</a></li><li><a href="global.html#event:Вызывается при изменении адреса маркера">Вызывается при изменении адреса маркера</a></li><li><a href="global.html#event:Вызывается при изменении местоположения маркера">Вызывается при изменении местоположения маркера</a></li><li><a href="global.html#event:Событие вызывается, когда произошло нажатие клавишей мыши на карте">Событие вызывается, когда произошло нажатие клавишей мыши на карте</a></li></ul><h3>Namespaces</h3><ul><li><a href="cityways.html">cityways</a></li><li><a href="cityways.event.html">event</a></li><li><a href="cityways.helper.styles.html">styles</a></li><li><a href="cityways.helper.time.html">time</a></li><li><a href="cityways.logger.html">logger</a></li><li><a href="cityways.map.html">map</a></li><li><a href="cityways.map.event.html">event</a></li><li><a href="cityways.options.html">options</a></li><li><a href="cityways.page.html">page</a></li><li><a href="cityways.util.html">util</a></li></ul><h3>Global</h3><ul><li><a href="global.html#address">address</a></li><li><a href="global.html#availableRouteTypes">availableRouteTypes</a></li><li><a href="global.html#currentCity">currentCity</a></li><li><a href="global.html#div">div</a></li><li><a href="global.html#enableRouteTypeBtn">enableRouteTypeBtn</a></li><li><a href="global.html#findShortestPaths">findShortestPaths</a></li><li><a href="global.html#finishMarker">finishMarker</a></li><li><a href="global.html#getCurrentCity">getCurrentCity</a></li><li><a href="global.html#getFullCost">getFullCost</a></li><li><a href="global.html#getNativeMapObj">getNativeMapObj</a></li><li><a href="global.html#getWalkingTime">getWalkingTime</a></li><li><a href="global.html#googleMap">googleMap</a></li><li><a href="global.html#imgFileName">imgFileName</a></li><li><a href="global.html#location">location</a></li><li><a href="global.html#mapWidget">mapWidget</a></li><li><a href="global.html#settingsPanel">settingsPanel</a></li><li><a href="global.html#startMarker">startMarker</a></li><li><a href="global.html#visibleRightPanel">visibleRightPanel</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Thu Feb 14 2013 03:24:21 GMT+0200 (EET)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
