<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: language.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: language.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/* Copyright (c) 2006-2012 by OpenLayers Contributors (see authors.txt for 
 * full list of contributors). Published under the 2-clause BSD license.
 * See license.txt in the OpenLayers distribution or repository for the
 * full text of the license. */

/**
 * @requires cityways/cityways.js
 */

/**
 * Статический класс
 */
cityways.language = {
    
    /** 
     * Property: code
     * {String}  Current language code to use in OpenLayers.  Use the
     *     &lt;setCode> method to set this value and the &lt;getCode> method to
     *     retrieve it.
     */
    code: null,

    /** 
     * APIProperty: defaultCode
     * {String} Default language to use when a specific language can't be
     *     found.  Default is "en".
     */
    defaultCode: "ru",
        
    /**
     * APIFunction: getCode
     * Get the current language code.
     *
     * Returns:
     * {String} The current language code.
     */
    getCode: function() {
        if(!cityways.language.code) {
            cityways.language.setCode();
        }
        


        return cityways.language.code;
    },
    
    /**
     * APIFunction: setCode
     * Set the language code for string translation.  This code is used by
     *     the &lt;OpenLayers.Lang.translate> method.
     *
     * Parameters:
     * code - {String} These codes follow the IETF recommendations at
     *     http://www.ietf.org/rfc/rfc3066.txt.  If no value is set, the
     *     browser's language setting will be tested.  If no &lt;OpenLayers.Lang>
     *     dictionary exists for the code, the &lt;OpenLayers.String.defaultLang>
     *     will be used.
     */
    setCode: function(code) {
        var lang;
        
        if(!code) {
            code = (cityways.BROWSER_NAME == "msie") ?
                navigator.userLanguage : navigator.language;
        }
        var parts = code.split('-');
        parts[0] = parts[0].toLowerCase();
        
        if(typeof cityways.lang[parts[0]] == "object") {
            lang = parts[0];
        }
        
        // check for regional extensions
        if(parts[1]) {
            var testLang = parts[0] + '-' + parts[1].toUpperCase();
            if(typeof cityways.lang[testLang] == "object") {
                lang = testLang;
            }
        }
        if(!lang) {
            cityways.Console.warn(
                'Failed to find cityways.Lang.' + parts.join("-") +
                ' dictionary, falling back to default language'
            );
            lang = cityways.Language.defaultCode;
        }
        
        cityways.language.code = lang;
    },

    /**
     * APIMethod: translate
     * Looks up a key from a dictionary based on the current language string.
     *     The value of &lt;getCode> will be used to determine the appropriate
     *     dictionary.  Dictionaries are stored in &lt;OpenLayers.Lang>.
     *
     * Parameters:
     * key - {String} The key for an i18n string value in the dictionary.
     * context - {Object} Optional context to be used with
     *     &lt;OpenLayers.String.format>.
     * 
     * Returns:
     * {String} A internationalized string.
     */
    translate: function(key) {
        var dictionary = cityways.lang[cityways.language.getCode()];
        var message = dictionary && dictionary[key];
        if(!message) {
            message = key;
        }
        return message;
    }
    
    
};

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="cityways.Class.html">Class</a></li><li><a href="cityways.EventListener.html">EventListener</a></li><li><a href="cityways.Map_.html">Map</a></li><li><a href="cityways.map.GoogleMap.html">GoogleMap</a></li><li><a href="cityways.map.Marker.html">Marker</a></li><li><a href="cityways.MapWidget.html">MapWidget</a></li><li><a href="cityways.page.MainPage.html">MainPage</a></li><li><a href="global.html#initialize">initialize</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:Вызваается при изменении изображения маркера">Вызваается при изменении изображения маркера</a></li><li><a href="global.html#event:Вызывается при изменении адреса маркера">Вызывается при изменении адреса маркера</a></li><li><a href="global.html#event:Вызывается при изменении местоположения маркера">Вызывается при изменении местоположения маркера</a></li><li><a href="global.html#event:Событие вызывается, когда произошло нажатие клавишей мыши на карте">Событие вызывается, когда произошло нажатие клавишей мыши на карте</a></li></ul><h3>Namespaces</h3><ul><li><a href="cityways.html">cityways</a></li><li><a href="cityways.event.html">event</a></li><li><a href="cityways.helper.styles.html">styles</a></li><li><a href="cityways.helper.time.html">time</a></li><li><a href="cityways.logger.html">logger</a></li><li><a href="cityways.map.html">map</a></li><li><a href="cityways.map.event.html">event</a></li><li><a href="cityways.options.html">options</a></li><li><a href="cityways.page.html">page</a></li><li><a href="cityways.util.html">util</a></li></ul><h3>Global</h3><ul><li><a href="global.html#address">address</a></li><li><a href="global.html#availableRouteTypes">availableRouteTypes</a></li><li><a href="global.html#currentCity">currentCity</a></li><li><a href="global.html#div">div</a></li><li><a href="global.html#enableRouteTypeBtn">enableRouteTypeBtn</a></li><li><a href="global.html#findShortestPaths">findShortestPaths</a></li><li><a href="global.html#finishMarker">finishMarker</a></li><li><a href="global.html#getCurrentCity">getCurrentCity</a></li><li><a href="global.html#getFullCost">getFullCost</a></li><li><a href="global.html#getNativeMapObj">getNativeMapObj</a></li><li><a href="global.html#getWalkingTime">getWalkingTime</a></li><li><a href="global.html#googleMap">googleMap</a></li><li><a href="global.html#imgFileName">imgFileName</a></li><li><a href="global.html#location">location</a></li><li><a href="global.html#mapWidget">mapWidget</a></li><li><a href="global.html#settingsPanel">settingsPanel</a></li><li><a href="global.html#startMarker">startMarker</a></li><li><a href="global.html#visibleRightPanel">visibleRightPanel</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Thu Feb 14 2013 03:24:20 GMT+0200 (EET)
</footer>

<script> prettyPrint(); </script>
</body>
</html>
